@model SearchTripViewModel

<section class="container">
    <div class="shadow-container z-depth-3 row">
        <h3 class="center-align">Намерени пътувания</h3>
        <div class="col s12">
            @using (Ajax.BeginForm(nameof(SearchController.LoadTrips), null, new AjaxOptions
            {
                UpdateTargetId = "result",
                InsertionMode = InsertionMode.Replace
            }, FormMethod.Get))
            {
                <div class="col l3 offset-l3">
                    @Html.TextBoxFor(x => x.Origin, new { @class = "quick-travel-search-input autocomplete", placeholder = "От" })
                </div>
                <div class="col l3">
                    @Html.TextBoxFor(x => x.Destination, new { @class = "quick-travel-search-input autocomplete", placeholder = "До" })
                </div>
                <div class="col l1">
                    <input type="submit" value="търсене" class="btn">
                </div>
            }

        </div>
        <section id="result">
            @Html.Partial("_TripSearchResult", Model.Data)
        </section>
        <section class="col s8 offset-s2">
            <ul class="pagination">
                <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>

                @for (int i = 0; i < Model.TotalCount; i++)
                {
                    if (i % 2 == 0)
                    {
                        <li class="waves-effect">
                            @Ajax.ActionLink((i / 2 + 1).ToString(),
                           nameof(SearchController.LoadTrips),
                           new { page = (i / 2 + 1), origin = Model.Origin, destination = Model.Destination },
                           new AjaxOptions
                           {
                               UpdateTargetId = "result",
                               InsertionMode = InsertionMode.Replace
                           })
                        </li>
                    }
                }
                <li class="waves-effect"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
            </ul>
        </section>
    </div>
</section>

@section Scripts{
    @Scripts.Render("~/bundles/cities-autocomplete")
}
